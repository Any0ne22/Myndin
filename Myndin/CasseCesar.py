# coding: utf-8
#Pierre H.
import codecs
import Cesar

def CasseCesar(phraseCodee): # def cesar ...
    alphabet4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"#$%&'()*+,-./:;<=>?@[]^_`{|}~ ¢£¤¥¦§¨©ª«¬®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõöœ÷øùúûüýþÿ\n"
    alphabet = ['T','R','O','I','S','È','M','E',' ','P','A','\n','B','o','r','d','i','n','—','L','e','s','F','a','ç','à','c','u','É','p','l','g','1','8','2','0','C','H','5','t','m','b','h','v',';','6',',','f','é','’','7','!','q','-','?','x','.','ê','û','N','K','z','w','y','è','J',':','À','V','k','ô','j','ù','D','Q','«','»','°','3','ï','4','â','î','U','œ','…','G','Z','(',')','Ê','Y','W','X','ü','[',']','9','Ç','ë','Ô','=','\'']
    frequence = [0.041009917529270565,0.04015107108886699,0.03564212727674824,0.08513315340500408,0.06484290625046968,0.00010735580505044649,0.10069974513731882,0.07547113095046389,16.758241168374695,0.11959436682619738,0.06537968527572191,0.5444012874108142,0.04058049430906877,4.091973865302818,5.124629354083064,2.7118076355742784,5.802903330391784,5.441543690591981,0.07879916090702772,0.12549893610397195,11.177671710242388,6.133344498337059,0.03059640443937725,6.355463658986432,0.08298603730399515,0.44316476324824317,2.298917209350261,4.654840351182309,0.0049383670323205385,2.058440206037261,4.305611917353207,0.6575543059339848,0.012667984995952687,0.005045722837370985,0.007514906353531255,0.01341947563130581,0.07192838938379915,0.006441348303026789,0.0032206741515133945,5.872147824649322,2.029776206088792,0.6368346355592486,0.6597014220349937,1.2835460051831382,0.09372161780903979,0.002683895126261162,1.5511840271739015,0.8002301708460282,1.5334703193405776,1.0833274287640555,0.0024691835161602693,0.13419475631305813,0.849506485364183,0.24605950517562336,0.09619080132520005,0.30671553502912563,0.5177770477583035,0.17284284613121884,0.025980104822208052,0.0814830560332889,0.037789243377757166,0.10434984250903401,0.07031805230804246,0.1870138123978778,0.22405156514028182,0.028986067363620555,0.07579319836561522,0.01664014978281921,0.04455265909593529,0.04358645685048128,0.05303376769492057,0.2676380219907631,0.03027433702422591,0.06548704108077236,0.03435385761614288,0.11927229941104606,0.11454864398882642,0.0012882696606053578,0.004508943812118752,0.02114909359493796,0.0020397602959584833,0.03939958045351386,0.03231409732018439,0.018143131053525458,0.020934381984837064,0.0946878200544938,0.00858846440403572,0.00021471161010089298,0.00429423220201786,0.00429423220201786,0.0005367790252522325,0.005475146057572771,0.0025765393212107157,0.0122385617757509,0.0006441348303026789,0.0044015880070683066,0.0044015880070683066,0.0017176928808071438,0.0006441348303026789,0.001073558050504465,0.00010735580505044649,0.00010735580505044649,0.00010735580505044649]
        
    tableau = []
    compte = []
    x = 0
    for lettre in phraseCodee:
        try:
            position = tableau.index(lettre)
            compte[position] = compte[position] +1
        except :
            tableau.append(lettre) # .append = Ajoute un tableau
            compte.append(1)
        x+= 1
    
    frequencePhraseCodee = []
    for i in range(0,len(compte)):
        frequencePhraseCodee.append(compte[i] / len(phraseCodee))
    
    lettreMaxRef = frequence.index(max(frequence))
    lettreMaxPhraseCodee = frequencePhraseCodee.index(max(frequencePhraseCodee))
    
    caractereMaxRef = alphabet[lettreMaxRef]
    caractereMaxPhraseCodee = tableau[lettreMaxPhraseCodee]
    
    caractereRefApparaitLePlus = alphabet4.index(caractereMaxRef)
    caracterePhraseCodeeApparaitLePlus = alphabet4.index(caractereMaxPhraseCodee)
    
    decalage = caractereRefApparaitLePlus - caracterePhraseCodeeApparaitLePlus
        
    return decalage, Cesar.cesar(phraseCodee, decalage, 4)